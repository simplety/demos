<!DOCTYPE html>
<html lang="en">

<head>
    <title>Document</title>
</head>

<body>
    <ul>
    </ul>
    <button id="btn">load more</button>
    <script type="text/javascript">
    function ajax(opts) {

        opts.url = opts.url || ""
        opts.type = opts.type || "get"
        opts.data = opts.data || {};
        opts.success = opts.success || function(){}
        opts.error = opts.error || function(){}

        var query = []
        for(i in opts.data){
          query.push(i + "=" + opts.data[i])
        }
        query = query.join("&")

        var xhr = new XMLHttpRequest();
        xhr.onload = function(){
          if(xhr.status == 200 || xhr.status == 304){
            opts.success(JSON.parse(xhr.response))
          }else{
            opts.error()
          }
        }


        if(opts.type.toLowerCase() === "get"){
          xhr.open(opts.type, opts.url+"?"+query, true)
          console.log(opts.url+"?"+query)
          xhr.send()
        }else if(opts.type.toLowerCase() === "post"){
          xhr.open(opts.type, opts.url, true)
          xhr.send(query)
        }
    }

    document.querySelector('#btn').addEventListener('click', function() {
        ajax({
            url: '/login', //接口地址
            type: 'get', // 类型， post 或者 get,
            data: {
                username: 'xiaoming1',
                password: 'abcd1234'
            },
            success: function(ret) {
                console.log(ret); // {status: 0}
            },
            error: function() {
                console.log('出错了')
            }
        })
    });
    </script>
</body>

</html>
